$(document).ready(function(){
    var orderNo = '';
    var status = '';
    var username = '';
    var receiver = '';
    var contactPhone = '';
    var createStart = '';
    var createEnd = '';
    var payStart = '';
    var payEnd = '';
    var array = [];


    var checked_array = {
        length:0
    };
    var outport_array = {};
    var itemIds = '[';

    array[0] = orderNo;
    array[1] = status;
    array[2] = username;
    array[3] = receiver;
    array[4] = contactPhone;
    array[5] = createStart;
    array[6] = createEnd;
    array[7] = payStart;
    array[8] = payEnd;

    jPages("../web/api/ordermanage/getOrders","itemContainer_All","holder_All",1,5,'','',array,function(pageId){
        if( checked_array[pageId] != undefined ) {
            $(".accountNumber").next().each(function () {
                var _this = this;
                checked_array[pageId].map(function(orderCode){
                    if($(_this).html() == orderCode){
                        $(_this).prev().prop("checked","checked");
                    }
                });
            });
        }
        return isTop;
    });

    $(document).on("click",".accountNumber",function(){
        var pageIndex=$(".jp-current").html();
        var orderCode=$(this).next().html();
        if( checked_array[pageIndex] == undefined ){
            checked_array[pageIndex] = new Array();
            checked_array.length++;
            outport_array[checked_array.length-1] = new Array();
        }
        if($(this).is(":checked")){
            checked_array[pageIndex].push(orderCode);
            outport_array[checked_array.length-1].push(orderCode);
        }
        else{
            checked_array[pageIndex].map(function(code){
                if( code == orderCode ){
                    checked_array[pageIndex].remove(code);
                    outport_array[checked_array.length-1].remove(orderCode);
                }
            })
        }
    });


    $("#accSearch").click(function(){
        checked_array = {};
        outport_array = {};
        checked_array.length = 0;

        orderNo = $("input[name='accountNum']").val();
        receiver = $("input[name='accountCust']").val();
        username = $("input[name='accountUserName']").val();
        contactPhone = $("input[name='accountTel']").val();
        createStart = $("#datetimepicker_start").val();
        createEnd = $("#datetimepicker_end").val();
        payStart = $("#pay_datetimepicker_start").val();
        payEnd = $("#pay_datetimepicker_end").val();
        array[0] = orderNo;
        array[2] = username;
        array[3] = receiver;
        array[4] = contactPhone;
        array[5] = createStart;
        array[6] = createEnd;
        array[7] = payStart;
        array[8] = payEnd;
        var type = $(".accountTable ul li.accOn").html();
        if( type == '全部订单' ){
            status = '';
            array[1] = status;
            $("#itemContainer_All").empty();
            $("#holder_All").empty();


            jPages("../web/api/ordermanage/getOrders","itemContainer_All","holder_All",1,5,'','',array,function(pageId){
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            })
        }
        if( type == '待付款' ){
            status = 'SUBMITED';
            array[1] = status;
            $("#itemContainer_first").empty();
            jPages("../web/api/ordermanage/getOrders","itemContainer_first","holder_first",1,5,'','',array,function(pageId){
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
        }
        if( type == '待发货' ){
            status = 'WAIT_DELIVER';
            array[1] = status;
            $("#itemContainer_second").empty();
            jPages("../web/api/ordermanage/getOrders","itemContainer_second","holder_second",1,5,'','',array,function(pageId){
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
        }
        if( type == '待收货' ){
            status = 'DELIVERED';
            array[1] = status;
            $("#itemContainer_third").empty();
            jPages("../web/api/ordermanage/getOrders","itemContainer_third","holder_third",1,5,'','',array,function(pageId){
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
        }
        if( type == '待提货' ){
            status = 'WAIT_PICKUP';
            array[1] = status;
            $("#itemContainer_forth").empty();
            jPages("../web/api/ordermanage/getOrders","itemContainer_forth","holder_forth",1,5,'','',array,function(pageId){
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
        }
        if( type == '已完成' ){
            status = 'RECIEVED';
            array[1] = status;
            $("#itemContainer_fifth").empty();
            jPages("../web/api/ordermanage/getOrders","itemContainer_fifth","holder_fith",1,5,'','',array,function(pageId){
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
        }
        if( type == '已取消' ){
            status = 'CANCELED';
            array[1] = status;
            $("#itemContainer_sixth").empty();
            jPages("../web/api/ordermanage/getOrders","itemContainer_sixth","holder_sixth",1,5,'','',array,function(pageId){
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
        }

    });

    //日历控件
    $("#date_start").click(function(e){
        $("#datetimepicker_start").datetimepicker({
            step:5,
            lang:'ch',
            formatTime:'H:i',
            formatDate:'d.m.Y'
        });
        $("#datetimepicker_start").trigger("focus");
    })
    $("#datetimepicker_start").blur(function(){
        $("#datetimepicker_start").datetimepicker('destroy');
    });

    $("#date_end").click(function(e){
        $("#datetimepicker_end").datetimepicker({
            step:5,
            lang:'ch',
            formatTime:'H:i',
            formatDate:'d.m.Y'
        });
        $("#datetimepicker_end").trigger("focus");
    })
    $("#datetimepicker_end").blur(function(){
        $("#datetimepicker_end").datetimepicker('destroy');
    });

    $("#pay_date_start").click(function(e){
        $("#pay_datetimepicker_start").datetimepicker({
            step:5,
            lang:'ch',
            formatTime:'H:i',
            formatDate:'d.m.Y'
        });
        $("#pay_datetimepicker_start").trigger("focus");
    })
    $("#pay_datetimepicker_start").blur(function(){
        $("#pay_datetimepicker_start").datetimepicker('destroy');
    });

    $("#pay_date_end").click(function(e){
        $("#pay_datetimepicker_end").datetimepicker({
            step:5,
            lang:'ch',
            formatTime:'H:i',
            formatDate:'d.m.Y'
        });
        $("#pay_datetimepicker_end").trigger("focus");
    })
    $("#pay_datetimepicker_end").blur(function(){
        $("#pay_datetimepicker_end").datetimepicker('destroy');
    });


    //修改订单金额
    $("#setAccountMoneyWarningConfrim").click(function(){
        $(".setAccountMoneyWarning").fadeOut(500);
        $(".setAccountMoney").fadeIn(500);
    });
    $("#setAccountMoneyWarningCancel").click(function(){
        discoverHtml();
        $(".setAccountMoneyWarning").fadeOut(500);

    });
    $("#setAccountMoneyConfrim").click(function(){
        var orderCode = $("#orderCode").val();
        var price = $("#priceForsetAccountMoney").val();
        if( isNaN(price) ){
            window.wxc.xcConfirm("请输入正确金额", window.wxc.xcConfirm.typeEnum.error);
        }
        else{
            $.post("../web/api/ordermanage/editPrice",{
                orderCode:orderCode,
                price:price
            },function(data){
                if( data.response == 'success' ){
                    ensure_alert("accountManager");
                }
                else{
                    window.wxc.xcConfirm(data.data.text, window.wxc.xcConfirm.typeEnum.error);
                }
            },'json');
        }

    });
    $("#setAccountMoneyCancel").click(function(){
        discoverHtml();
        $(".setAccountMoney").fadeOut(500);
    });

    //取消订单
    $(document).on("click",".cancelorder",function(){
        coverHtml();
        $("#orderCode").val($(this).parent().parent().parent().find("span").html());
        $(".CancelAccountStateWarning").fadeIn(500);
    });
    $("#CancelAccountStateWarningConfrim").click(function(){
        $(".CancelAccountStateWarning").fadeOut(500);
        $(".updateAccountState").fadeIn(500);
    });
    $("#CancelAccountStateWarningCancel").click(function(){
        discoverHtml();
        $(".CancelAccountStateWarning").fadeOut(500);
    });
    $("#updateAccountStateConfrim").click(function(){
        var orderCode = $("#orderCode").val();
        var reason =$(".updateAccountState textarea").val();
        $.post('../web/api/ordermanage/cancelOrder',{
            orderCode:orderCode,
            reason:reason
        },function(data){
            if(data.response == 'success'){
                ensure_alert('accountManager');
            }
        },'json');
    });
    $("#updateAccountStateCancel").click(function(){
       $(".updateAccountState").fadeOut(500);
        discoverHtml();
    });

    $(".accountTable li").click(function(){
        var str = $(this).html();
        if ( str == '全部订单' ){
            status = '';
            array[1] = status;
            jPages("../web/api/ordermanage/getOrders","itemContainer_All","holder_All",1,5,'','',array,function(pageId){
                checked_array = {};
                outport_array = {};
                checked_array.length = 0;
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
            $( $(".jpages_Table")[0]).css("display","block").siblings(".jpages_Table").css("display","none");
            //$( $(".jpages_Table")[0]).sibling().css("display","none");
        }
        else if ( str == '待付款' ){
            status = 'SUBMITED';
            array[1] = status;

            jPages("../web/api/ordermanage/getOrders","itemContainer_first","holder_first",1,5,'','',array,function(pageId){
                checked_array = {};
                outport_array = {};
                checked_array.length = 0;
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
            $( $(".jpages_Table")[1]).css("display","block").siblings(".jpages_Table").css("display","none");
            //$( $(".jpages_Table")[1]).sibling().css("display","none");
        }
        else if ( str == '待发货' ){
            status = 'WAIT_DELIVER';
            array[1] = status;
            jPages("../web/api/ordermanage/getOrders","itemContainer_second","holder_second",1,5,'','',array,function(pageId){
                checked_array = {};
                outport_array = {};
                checked_array.length = 0;
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
            $( $(".jpages_Table")[2]).css("display","block").siblings(".jpages_Table").css("display","none");
            //$( $(".jpages_Table")[2]).sibling().css("display","none");
        }
        else if ( str == '待收货' ){
            status = 'DELIVERED';
            array[1] = status;
            jPages("../web/api/ordermanage/getOrders","itemContainer_third","holder_third",1,5,'','',array,function(pageId){
                checked_array = {};
                outport_array = {};
                checked_array.length = 0;
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
            $( $(".jpages_Table")[3]).css("display","block").siblings(".jpages_Table").css("display","none");
            //$( $(".jpages_Table")[3]).sibling().css("display","none");
        }
        else if ( str == '待提货' ){
            status = 'WAIT_PICKUP';
            array[1] = status;
            jPages("../web/api/ordermanage/getOrders","itemContainer_forth","holder_forth",1,5,'','',array,function(pageId){
                checked_array = {};
                outport_array = {};
                checked_array.length = 0;
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
            $( $(".jpages_Table")[4]).css("display","block").siblings(".jpages_Table").css("display","none");
            //$( $(".jpages_Table")[4]).sibling().css("display","none");
        }
        else if ( str == '已完成' ){
            status = 'RECIEVED';
            array[1] = status;
            jPages("../web/api/ordermanage/getOrders","itemContainer_fifth","holder_fifth",1,5,'','',array,function(pageId){
                checked_array = {};
                outport_array = {};
                checked_array.length = 0;
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
            $( $(".jpages_Table")[5]).css("display","block").siblings(".jpages_Table").css("display","none");
            //$( $(".jpages_Table")[5]).sibling().css("display","none");
        }
        else if ( str == '已取消' ){
            status = 'CANCELED';
            array[1] = status;
            jPages("../web/api/ordermanage/getOrders","itemContainer_sixth","holder_sixth",1,5,'','',array,function(pageId){
                checked_array = {};
                outport_array = {};
                checked_array.length = 0;
                if( checked_array[pageId] != undefined ) {
                    $(".accountNumber").next().each(function () {
                        var _this = this;
                        checked_array[pageId].map(function(orderCode){
                            if($(_this).html() == orderCode){
                                $(_this).prev().prop("checked","checked");
                            }
                        });
                    });
                }
                return isTop;
            });
            $( $(".jpages_Table")[6]).css("display","block").siblings(".jpages_Table").css("display","none");
            //$( $(".jpages_Table")[6]).siblings().css("display","none");
        }
    });


    //从全部退单位置返回时的处理
    var local_url = document.location.href;
    var type = local_url.split("?");
    if( type[1] != undefined ){
        type = type[1].split("=");
        getData( type );
    }



    //查看详情操作
    $(document).on("click",".detailCheck",function(){
        coverHtml();
        var data = $(this).parent().parent().parent().parent().find(".data").val();
        data = JSON.parse(data);


        var check=$(this).parent().parent().parent().siblings().children(".orderStatus").html();
        if(check == "待付款"){
            $(".Img1").css({"background":"#24b35f"})
            $(".Img11").css({"color":"#24b35f"})
            $(".Img2,.Img3,.Img4").css({"background":"#e6e6e6"})
            $(".Img22,.Img33,.Img44").css({"color":"#e6e6e6"})
            $(".orderTime").html(handleDate_prev(new Date( data.createTime )) + ' ' + handleDate_next(new Date( data.createTime )));
            $(".PayedTime").html("");
            $(".sendExpressTime").html("");
            $(".finishTime").html("");
            //赋值

        }else if(check=="待发货"||check=="待提货"){
            $(".Img1,.Img2").css({"background":"#24b35f"})
            $(".Img11,.Img22").css({"color":"#24b35f"})
            $(".Img3,.Img4").css({"background":"#e6e6e6"})
            $(".Img33,.Img44").css({"color":"#e6e6e6"})
            $(".orderTime").html(handleDate_prev(new Date( data.createTime )) + ' ' + handleDate_next(new Date( data.createTime )));
            $(".PayedTime").html(handleDate_prev(new Date( data.ucoinPayTime )) + ' ' + handleDate_next(new Date( data.ucoinPayTime )));
            $(".sendExpressTime").html("");
            $(".finishTime").html("");
            //赋值

        }
        else if(check=="已发货"){
            $(".Img1,.Img2,.Img3").css({"background":"#24b35f"})
            $(".Img11,.Img22,.Img33").css({"color":"#24b35f"})
            $(".Img4").css({"background":"#e6e6e6"})
            $(".Img44").css({"color":"#e6e6e6"})
            $(".orderTime").html(handleDate_prev(new Date( data.createTime )) + ' ' + handleDate_next(new Date( data.createTime )));
            $(".PayedTime").html(handleDate_prev(new Date( data.ucoinPayTime )) + ' ' + handleDate_next(new Date( data.ucoinPayTime )));
            $(".sendExpressTime").html(handleDate_prev(new Date( data.sendExpressTime )) + ' ' + handleDate_next(new Date( data.sendExpressTime )));
            $(".finishTime").html("");
            //赋值

        }else if(check=="已完成"){
            $(".Img1,.Img2,.Img3,.Img4").css({"background":"#24b35f"})
            $(".Img11,.Img22,.Img33,.Img44").css({"color":"#24b35f"})
            $(".orderTime").html(handleDate_prev(new Date( data.createTime )) + ' ' + handleDate_next(new Date( data.createTime )));
            $(".PayedTime").html(handleDate_prev(new Date( data.ucoinPayTime )) + ' ' + handleDate_next(new Date( data.ucoinPayTime )));
            $(".sendExpressTime").html(handleDate_prev(new Date( data.sendExpressTime )) + ' ' + handleDate_next(new Date( data.sendExpressTime )));
            $(".finishTime").html(handleDate_prev(new Date( data.getGoodsTime )) + ' ' + handleDate_next(new Date( data.getGoodsTime )));
            //赋值

        }
        var checkstate=$(this).parent().parent().parent().siblings(".order_type").val();
        if(checkstate == 'false,true'){//物流单详情网点代客下单
            if( isTop ){
                $(".detailOne").fadeIn(500);
                $(".detailTwo,.detailThree,.detailFour").fadeOut(500);
                //-------订单概况
                //订单编号
                $( $(".detailOne .checkDetailOne dl:nth-child(1)").children()[1] ).find("span").html(data.orderCode);
                //下单时间
                var createTime = $(this).parent().parent().parent().parent().find(".hidden_create_time").val();
                //var createDate = handleFullTime( createTime,10,4 );
                $( $(".detailOne .checkDetailOne dl:nth-child(1)").children()[2] ).find("span").html(createTime);
                //订单状态
                var orderStatus = $(this).parent().parent().parent().find("orderStatus").html();
                $( $(".detailOne .checkDetailOne dl:nth-child(1)").children()[3] ).find("span").html(orderStatus);
                //原始金额
                $( $(".detailOne .checkDetailOne dl:nth-child(1)").children()[5] ).find("span").html((data.orderOldPrice).toFixed(2));
                //优惠金额
                $( $(".detailOne .checkDetailOne dl:nth-child(1)").children()[6] ).find("span").html(handleUndefined(data.orderPrePrice));
                //交易金额
                $( $(".detailOne .checkDetailOne dl:nth-child(1)").children()[7] ).find("span").html((data.orderPrice).toFixed(2));
                //邮豆支付金额
                $( $(".detailOne .checkDetailOne dl:nth-child(1)").children()[8] ).find("span").html((data.orderPrice).toFixed(2));
                //金钱支付金额
                $( $(".detailOne .checkDetailOne dl:nth-child(1)").children()[9] ).find("span").html(0);
                if( data.payTime != undefined ){
                    //邮豆支付时间
                    $( $(".detailOne .checkDetailOne dl:nth-child(1)").children()[10] ).find("span").html( handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                    //支付完成时间
                    $( $(".detailOne .checkDetailOne dl:nth-child(1)").children()[11] ).find("span").html(handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                }
                //快递信息
                //-------||||||||||------------
                $( $(".detailOne .checkDetailOne dl:nth-child(2)").children()[2]).find("span").html(data.customerRemark);
                $( $(".detailOne .checkDetailOne dl:nth-child(2)").children()[3]).find("span").html(data.customerRemark);
                //---------
                //配送方式
                //-------||||||||||------------
                if( data.selfPick ){
                    $( $( $(".detailOne .checkDetailOne dl:nth-child(1)")[2]).children()[1] ).find("span").html("用户自提");
                }
                else{
                    $( $( $(".detailOne .checkDetailOne dl:nth-child(1)")[2]).children()[1] ).find("span").html("快递配送");
                }
                $( $( $(".detailOne .checkDetailOne dl:nth-child(1)")[2]).children()[9] ).find("span").html(data.customerRemark);
                $(".detailOne .checkDetailOne .deliveryPrice").html(data.expressPrice);//运费
                $(".detailOne .checkDetailOne .deliveryAddress").html(data.shippingProvince + data.shippingCity + data.shippingCounty);//收货地址
                $(".detailOne .checkDetailOne .deliveryDetailAddress").html( data.shippingAddress );//详细地址
                $(".detailOne .checkDetailOne .personGet").html( data.shippingPerson );//收货人
                $(".detailOne .checkDetailOne .contactPhone").html( data.shippingPhone );//联系电话
                $(".detailOne .checkDetailOne .cellPhone").html( data.shippingMobile );//手机
                $(".detailOne .checkDetailOne .postCode").html();//邮编
                $(".detailOne .checkDetailOne .customerRemark").html( data.customerRemark );//客户留言

                //---------
                //下单类型

                if( data.isValet ){
                    $(".operator").html(handleUndefined(data.customerInfo.username));
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.customerInfo.username);
                }
                else{
                    try{
                        $(".operator").html(handleUndefined(data.pickInfo.enterpriseName));
                    }
                    catch(e){

                    }
                    //console.log(1,data.pickInfo.enterpriseName,$(".detailFour .checkDetailFour dl:nth-child(3)").children()[2]).find("span").html();
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.pickInfo.enterpriseName);
                }
                //--------||||||||||----------------
                //卖家备注
                $( $( $(".detailOne .checkDetailOne dl:nth-child(1)")[4]).children()[1] ).find("span").html(data.sellerRemark);
                //--------||||||||||----------------

                //商品列表
                $(".detailOne .Purchase_table tbody").empty();
                data.orderGoodsList.map(function(good){
                    var html = '';
                    html += '<tr bgcolor="#FFFFFF">';
                    html += '<td><img src="' + good.goodsImg + '" width="50" height="50" /><span>' + good.goodsInfoName + '</span></td>';
                    html += '<td><span>' + good.goodsInfoOldPrice.toFixed(2) + '</span>邮豆</td>';
                    html += '<td>' + good.goodsInfoNum + '</td>';
                    //规格
                    try{
                        var specStr = good.goodsProductReleSpecVoList.spec.specName + ':' + good.goodsProductReleSpecVoList.goodsSpecDetail.specDetailName;
                    }
                    catch(e){
                        console.log(e);
                    }
                    html += '<td><span style="overflow: hidden;text-overflow: ellipsis;">' + handleUndefined(specStr) + '</span></td>';
                    html += '<td><span>' + good.goodsInfoPrice.toFixed(2) + '</span>邮豆</td>';
                    html += '<td><span>' + good.goodsInfoSumPrice.toFixed(2) + '</span>邮豆</td>';
                    html += '</tr>';
                    $(".detailOne .Purchase_table tbody").append(html)
                });
            }
            else{
                $(".detailFour").fadeIn(500);
                //-------订单概况
                //订单编号
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[1] ).find("span").html(data.orderCode);
                //下单时间
                var createTime = $(this).parent().parent().parent().parent().find(".hidden_create_time").val();
                //var createDate = handleFullTime( createTime,10,4 );
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[2] ).find("span").html(createTime);
                //订单状态
                var orderStatus = $(this).parent().parent().parent().find("orderStatus").html();
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[3] ).find("span").html(orderStatus);
                //原始金额
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[5] ).find("span").html((data.orderOldPrice).toFixed(2));
                //优惠金额
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[6] ).find("span").html(handleUndefined(data.orderPrePrice));
                //交易金额
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[7] ).find("span").html((data.orderPrice).toFixed(2));
                //邮豆支付金额
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[8] ).find("span").html((data.orderPrice).toFixed(2));
                //金钱支付金额
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[9] ).find("span").html(0);
                if( data.payTime != undefined ){
                    //邮豆支付时间
                    $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[10] ).find("span").html( handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                    //支付完成时间
                    $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[11] ).find("span").html(handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                }
                //快递信息
                //-------||||||||||------------
                $( $(".detailFour .checkDetailFour dl:nth-child(2)").children()[2]).find("span").html(data.customerRemark);
                $( $(".detailFour .checkDetailFour dl:nth-child(2)").children()[3]).find("span").html(data.customerRemark);
                //---------
                //配送方式
                //-------||||||||||------------
                if( data.selfPick ){
                    $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[2]).children()[1] ).find("span").html("用户自提");
                }
                else{
                    $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[2]).children()[1] ).find("span").html("快递配送");
                }
                $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[2]).children()[9] ).find("span").html(data.customerRemark);
                $(".detailFour .checkDetailFour .deliveryPrice").html(data.expressPrice);//运费
                $(".detailFour .checkDetailFour .deliveryAddress").html(data.shippingProvince + data.shippingCity + data.shippingCounty);//收货地址
                $(".detailFour .checkDetailFour .deliveryDetailAddress").html( data.shippingAddress );//详细地址
                $(".detailFour .checkDetailFour .personGet").html( data.shippingPerson );//收货人
                $(".detailFour .checkDetailFour .contactPhone").html( data.shippingPhone );//联系电话
                $(".detailFour .checkDetailFour .cellPhone").html( data.shippingMobile );//手机
                $(".detailFour .checkDetailFour .postCode").html();//邮编
                $(".detailFour .checkDetailFour .customerRemark").html( data.customerRemark );//客户留言

                //---------
                //下单类型

                if( data.isValet ){
                    $(".operator").html(handleUndefined(data.customerInfo.username));
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.customerInfo.username);
                }
                else{
                    try{
                        $(".operator").html(handleUndefined(data.pickInfo.enterpriseName));
                    }
                    catch(e){

                    }
                    //console.log(1,data.pickInfo.enterpriseName,$(".detailFour .checkDetailFour dl:nth-child(3)").children()[2]).find("span").html();
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.pickInfo.enterpriseName);
                }
                //--------||||||||||----------------
                //卖家备注
                $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[4]).children()[1] ).find("span").html(data.sellerRemark);
                //--------||||||||||----------------

                //商品列表
                $(".detailFour .Purchase_table tbody").empty();
                data.orderGoodsList.map(function(good){
                    var html = '';
                    html += '<tr bgcolor="#FFFFFF">';
                    html += '<td><img src="' + good.goodsImg + '" width="50" height="50" /><span>' + good.goodsInfoName + '</span></td>';
                    html += '<td><span>' + good.goodsInfoOldPrice.toFixed(2) + '</span>邮豆</td>';
                    html += '<td>' + good.goodsInfoNum + '</td>';
                    //规格
                    try{
                        var specStr = good.goodsProductReleSpecVoList.spec.specName + ':' + good.goodsProductReleSpecVoList.goodsSpecDetail.specDetailName;
                    }
                    catch(e){
                        console.log(e);
                    }
                    html += '<td><span style="overflow: hidden;text-overflow: ellipsis;">' + handleUndefined(specStr) + '</span></td>';
                    html += '<td><span>' + good.goodsInfoPrice.toFixed(2) + '</span>邮豆</td>';
                    html += '<td><span>' + good.goodsInfoSumPrice.toFixed(2) + '</span>邮豆</td>';
                    html += '</tr>';
                    $(".detailFour .Purchase_table tbody").append(html)
                });
            }




        }
        else if(checkstate == 'false,false'){//物流单详情用户自主下单
            if( isTop ){
                $(".detailTwo").fadeIn(500);
                $(".detailOne,.detailThree,.detailFour").fadeOut(500);
                //-------订单概况
                //订单编号
                $( $(".detailTwo .checkDetailTwo dl:nth-child(1)").children()[1] ).find("span").html(data.orderCode);
                //下单时间
                var createTime = $(this).parent().parent().parent().parent().find(".hidden_create_time").val();
                //var createDate = handleFullTime( createTime,10,4 );
                $( $(".detailTwo .checkDetailTwo dl:nth-child(1)").children()[2] ).find("span").html(createTime);
                //订单状态
                var orderStatus = $(this).parent().parent().parent().find("orderStatus").html();
                $( $(".detailTwo .checkDetailTwo dl:nth-child(1)").children()[3] ).find("span").html(orderStatus);
                //原始金额
                $( $(".detailTwo .checkDetailTwo dl:nth-child(1)").children()[5] ).find("span").html(data.orderOldPrice.toFixed(2));
                //优惠金额
                $( $(".detailTwo .checkDetailTwo dl:nth-child(1)").children()[6] ).find("span").html(handleUndefined(data.orderPrePrice));
                //交易金额
                $( $(".detailTwo .checkDetailTwo dl:nth-child(1)").children()[7] ).find("span").html((data.orderPrice).toFixed(2));
                //邮豆支付金额
                $( $(".detailTwo .checkDetailTwo dl:nth-child(1)").children()[8] ).find("span").html((data.orderPrice).toFixed(2));
                //金钱支付金额
                $( $(".detailTwo .checkDetailTwo dl:nth-child(1)").children()[9] ).find("span").html(0);
                if( data.payTime != undefined ){
                    //邮豆支付时间
                    $( $(".detailTwo .checkDetailTwo dl:nth-child(1)").children()[10] ).find("span").html( handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                    //支付完成时间
                    $( $(".detailTwo .checkDetailTwo dl:nth-child(1)").children()[11] ).find("span").html(handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                }
                //快递信息
                var post_html = '';
                var post_count = 0;
                data.orderContainerRelations.map(function(object){
                    post_count++;
                    post_html += '<dd class="deliveryInfoPart"style="width:780px; height:50px;">包裹<a>';
                    post_html += post_count + '</a>：<br>';
                    post_html += '<div style="padding:5px 0px 5px 0px; width:360px; float:left;">物流公司：<span>';
                    post_html += object.expressName + '</span></div><div style="padding:5px 0px 5px 10px; width:360px; float:left;">';
                    post_html += '物流单号：<span>' + object.expressNo + '</span></div></dd>';
                });
                $(".deliveryInfoPart").remove();
                $(".deliveryInfo").after(post_html);

                //配送方式
                //-------||||||||||------------
                if( data.selfPick ){
                    $( $( $(".detailTwo .checkDetailTwo dl:nth-child(1)")[2]).children()[1] ).find("span").html("用户自提");
                }
                else{
                    $( $( $(".detailTwo .checkDetailTwo dl:nth-child(1)")[2]).children()[1] ).find("span").html("快递配送");
                }
                $( $( $(".detailTwo .checkDetailTwo dl:nth-child(1)")[2]).children()[9] ).find("span").html(data.customerRemark);
                $(".detailOne .checkDetailOne .deliveryPrice").html(data.expressPrice);//运费
                $(".detailOne .checkDetailOne .deliveryAddress").html(data.shippingProvince + data.shippingCity + data.shippingCounty);//收货地址
                $(".detailOne .checkDetailOne .deliveryDetailAddress").html( data.shippingAddress );//详细地址
                $(".detailOne .checkDetailOne .personGet").html( data.shippingPerson );//收货人
                $(".detailOne .checkDetailOne .contactPhone").html( data.shippingPhone );//联系电话
                $(".detailOne .checkDetailOne .cellPhone").html( data.shippingMobile );//手机
                $(".detailOne .checkDetailOne .postCode").html();//邮编
                $(".detailOne .checkDetailOne .customerRemark").html( data.customerRemark );//客户留言

                //---------
                //下单类型
                $(".detailTwo .billType").html("用户自主物流单");
                if( data.isValet ){
                    $(".operator").html(handleUndefined(data.customerInfo.username));
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.customerInfo.username);
                }
                else{
                    try{
                        $(".operator").html(handleUndefined(data.pickInfo.enterpriseName));
                    }
                    catch(e){
                    }
                    //console.log(1,data.pickInfo.enterpriseName,$(".detailFour .checkDetailFour dl:nth-child(3)").children()[2]).find("span").html();
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.pickInfo.enterpriseName);
                }
                //--------||||||||||----------------
                //卖家备注
                $( $( $(".detailTwo .checkDetailTwo dl:nth-child(1)")[4]).children()[1] ).find("span").html(data.sellerRemark);
                //$( $(".detailTwo .checkDetailTwo dl:nth-child(4)").children()[0]).find("span").html(data.sellerRemark);
                //--------||||||||||----------------

                //商品列表
                $(".detailTwo .Purchase_table tbody").empty();
                data.orderGoodsList.map(function(good){
                    var html = '';
                    html += '<tr bgcolor="#FFFFFF">';
                    html += '<td><img src="' + good.goodsImg + '" width="50" height="50" /><span>' + good.goodsInfoName + '</span></td>';
                    html += '<td><span>' + good.goodsInfoOldPrice.toFixed(2) + '</span>邮豆</td>';
                    html += '<td>' + good.goodsInfoNum + '</td>';


                    //规格
                    try{
                        var specStr = good.goodsProductReleSpecVoList.spec.specName + ':' + good.goodsProductReleSpecVoList.goodsSpecDetail.specDetailName;
                    }
                    catch(e){
                        console.log(e);
                    }
                    html += '<td><span style="overflow: hidden;text-overflow: ellipsis;">' + handleUndefined(specStr) + '</span></td>';
                    html += '<td><span>' + (good.goodsInfoPrice).toFixed(2) + '</span>邮豆</td>';
                    html += '<td><span>' +(good.goodsInfoSumPrice).toFixed(2) + '</span>邮豆</td>';
                    html += '</tr>';
                    $(".detailTwo .Purchase_table tbody").append(html)
                });
            }
            else{
                $(".detailFour").fadeIn(500);
                //-------订单概况
                //订单编号
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[1] ).find("span").html(data.orderCode);
                //下单时间
                var createTime = $(this).parent().parent().parent().parent().find(".hidden_create_time").val();
                //var createDate = handleFullTime( createTime,10,4 );
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[2] ).find("span").html(createTime);
                //订单状态
                var orderStatus = $(this).parent().parent().parent().find("orderStatus").html();
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[3] ).find("span").html(orderStatus);
                //原始金额
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[5] ).find("span").html(data.orderOldPrice.toFixed(2));
                //优惠金额
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[6] ).find("span").html(handleUndefined(data.orderPrePrice));
                //交易金额
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[7] ).find("span").html((data.orderPrice).toFixed(2));
                //邮豆支付金额
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[8] ).find("span").html((data.orderPrice).toFixed(2));
                //金钱支付金额
                $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[9] ).find("span").html(0);
                if( data.payTime != undefined ){
                    //邮豆支付时间
                    $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[10] ).find("span").html( handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                    //支付完成时间
                    $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[11] ).find("span").html(handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                }
                //快递信息
                var post_html = '';
                var post_count = 0;
                data.orderContainerRelations.map(function(object){
                    post_count++;
                    post_html += '<dd class="deliveryInfoPart" style="width:780px; height:50px;">包裹<a>';
                    post_html += post_count + '</a>：<br>';
                    post_html += '<div style="padding:5px 0px 5px 0px; width:360px; float:left;">物流公司：<span>';
                    post_html += object.expressName + '</span></div><div style="padding:5px 0px 5px 10px; width:360px; float:left;">';
                    post_html += '物流单号：<span>' + object.expressNo + '</span></div></dd>';
                });
                $(".deliveryInfoPart").remove();
                $(".deliveryInfo").after(post_html);

                //配送方式
                //-------||||||||||------------
                if( data.selfPick ){
                    $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[2]).children()[1] ).find("span").html("用户自提");
                }
                else{
                    $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[2]).children()[1] ).find("span").html("快递配送");
                }
                $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[2]).children()[9] ).find("span").html(data.customerRemark);
                $(".detailFour .checkDetailFour .deliveryPrice").html(data.expressPrice);//运费
                $(".detailFour .checkDetailFour .deliveryAddress").html(data.shippingProvince + data.shippingCity + data.shippingCounty);//收货地址
                $(".detailFour .checkDetailFour .deliveryDetailAddress").html( data.shippingAddress );//详细地址
                $(".detailFour .checkDetailFour .personGet").html( data.shippingPerson );//收货人
                $(".detailFour .checkDetailFour .contactPhone").html( data.shippingPhone );//联系电话
                $(".detailFour .checkDetailFour .cellPhone").html( data.shippingMobile );//手机
                $(".detailFour .checkDetailFour .postCode").html();//邮编
                $(".detailFour .checkDetailFour .customerRemark").html( data.customerRemark );//客户留言

                //---------
                //下单类型
                $(".detailFour .billType").html("用户自主物流单");
                if( data.isValet ){
                    $(".operator").html(handleUndefined(data.customerInfo.username));
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.customerInfo.username);
                }
                else{
                    try{
                        $(".operator").html(handleUndefined(data.pickInfo.enterpriseName));
                    }
                    catch(e){
                    }
                    //console.log(1,data.pickInfo.enterpriseName,$(".detailFour .checkDetailFour dl:nth-child(3)").children()[2]).find("span").html();
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.pickInfo.enterpriseName);
                }
                //--------||||||||||----------------
                //卖家备注
                $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[4]).children()[1] ).find("span").html(data.sellerRemark);
                //$( $(".detailTwo .checkDetailTwo dl:nth-child(4)").children()[0]).find("span").html(data.sellerRemark);
                //--------||||||||||----------------

                //商品列表
                $(".detailFour .Purchase_table tbody").empty();
                data.orderGoodsList.map(function(good){
                    var html = '';
                    html += '<tr bgcolor="#FFFFFF">';
                    html += '<td><img src="' + good.goodsImg + '" width="50" height="50" /><span>' + good.goodsInfoName + '</span></td>';
                    html += '<td><span>' + good.goodsInfoOldPrice.toFixed(2) + '</span>邮豆</td>';
                    html += '<td>' + good.goodsInfoNum + '</td>';
                    //规格
                    try{
                        var specStr = good.goodsProductReleSpecVoList.spec.specName + ':' + good.goodsProductReleSpecVoList.goodsSpecDetail.specDetailName;
                    }
                    catch(e){
                        console.log(e);
                    }
                    html += '<td><span style="overflow: hidden;text-overflow: ellipsis;">' + handleUndefined(specStr) + '</span></td>';
                    html += '<td><span>' + (good.goodsInfoPrice).toFixed(2) + '</span>邮豆</td>';
                    html += '<td><span>' +(good.goodsInfoSumPrice).toFixed(2) + '</span>邮豆</td>';
                    html += '</tr>';
                    $(".detailFour .Purchase_table tbody").append(html)
                });
            }




        }
        else if(checkstate == 'true,true'){//网点自提单详情网点代客下单
            if( isTop ){
                $(".detailThree").fadeIn(500);
                $(".detailTwo,.detailOne,.detailFour").fadeOut(500);
                //-------订单概况
                //订单编号
                $(".detailThree .checkDetailThree .orderCode").html(data.orderCode);
                //下单时间
                var createTime = $(this).parent().parent().parent().parent().find(".hidden_create_time").val();
                $(".detailThree .checkDetailThree .createTime").html(createTime);
                //订单状态
                $(".detailThree .checkDetailThree .orderStatus").html(orderStatus_handle(data.orderStatus));
                //原始金额
                $(".detailThree .checkDetailThree .oldPrice").html((data.orderOldPrice).toFixed(2));
                //优惠金额
                $(".detailThree .checkDetailThree .accountPrice").html(handleUndefined(data.orderPrePrice));
                //交易金额
                $(".detailThree .checkDetailThree .orderPrice").html((data.orderPrice).toFixed(2));
                //邮豆支付金额
                $(".detailThree .checkDetailThree .ucoinPrice").html((data.orderPrice).toFixed(2));
                //金钱支付金额
                $(".detailThree .checkDetailThree .moneyPayTime").html(0);
                if( data.payTime != undefined ){
                    //邮豆支付时间
                    $(".detailThree .checkDetailThree .ucoinPayTime").html( handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                    //支付完成时间
                    $(".detailThree .checkDetailThree .finishTime").html(handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                }
                //配送方式
                //-------||||||||||------------
                if( data.selfPick ){
                    $(".detailThree .checkDetailThree .deliveryType").html("用户自提");
                }
                else{
                    $(".detailThree .checkDetailThree .deliveryType").html("快递配送");
                }
                $(".detailThree .checkDetailThree .enterpriseAddress").html(data.pickInfo.enterpriseName);
                $(".detailThree .checkDetailThree .customerRemark").html(data.customerRemark);
                //---------
                //下单类型
                $(".detailThree .checkDetailThree .billType").html("用户自主自提单");
                if( data.isValet ){
                    $(".operator").html(handleUndefined(data.customerInfo.username));
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.customerInfo.username);
                }
                else{
                    try{
                        $(".operator").html(handleUndefined(data.pickInfo.enterpriseName));
                    }
                    catch(e){

                    }
                    //console.log(1,data.pickInfo.enterpriseName,$(".detailFour .checkDetailFour dl:nth-child(3)").children()[2]).find("span").html();
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.pickInfo.enterpriseName);
                }
                //--------||||||||||----------------
                //卖家备注
                $( $( $(".detailThree .checkDetailThree dl:nth-child(1)")[3]).children()[1] ).find("span").html(data.sellerRemark);
                //--------||||||||||----------------

                //商品列表
                $(".detailThree .Purchase_table tbody").empty();
                data.orderGoodsList.map(function(good){
                    var html = '';
                    html += '<tr bgcolor="#FFFFFF">';
                    html += '<td><img src="' + good.goodsImg + '" width="50" height="50" /><span>' + good.goodsInfoName + '</span></td>';
                    html += '<td><span>' + (good.goodsInfoOldPrice).toFixed(2) + '</span>邮豆</td>';
                    html += '<td>' + good.goodsInfoNum + '</td>';
                    //规格
                    try{
                        var specStr = '';
                        good.goodsProductReleSpecVoList.map(function(object){
                            specStr += object.spec.specName + ':' + object.goodsSpecDetail.specDetailName + '<br/>';
                        });
                    }
                    catch(e){
                        console.log(e);
                    }
                    html += '<td><span style="overflow: hidden;text-overflow: ellipsis;">' + handleUndefined(specStr) + '</span></td>';
                    html += '<td><span>' + (good.goodsInfoPrice).toFixed(2) + '</span>邮豆</td>';
                    html += '<td><span>' +(good.goodsInfoSumPrice).toFixed(2) + '</span>邮豆</td>';
                    html += '</tr>';
                    $(".detailThree .Purchase_table tbody").append(html)
                });
            }
            else{
                $(".detailFour").fadeIn(500);
                $(".detailFour .checkDetailFour li:nth-child(2)").css("display","none");
                //-------订单概况
                //订单编号
                $(".detailFour .checkDetailFour .orderCode").html(data.orderCode);
                //下单时间
                var createTime = $(this).parent().parent().parent().parent().find(".hidden_create_time").val();
                $(".detailFour .checkDetailFour .createTime").html(createTime);
                //订单状态
                $(".detailFour .checkDetailFour .orderStatus").html(orderStatus_handle(data.orderStatus));
                //原始金额
                $(".detailFour .checkDetailFour .oldPrice").html((data.orderOldPrice).toFixed(2));
                //优惠金额
                $(".detailFour .checkDetailFour .accountPrice").html(handleUndefined(data.orderPrePrice));
                //交易金额
                $(".detailFour .checkDetailFour .orderPrice").html((data.orderPrice).toFixed(2));
                //邮豆支付金额
                $(".detailFour .checkDetailFour .ucoinPrice").html((data.orderPrice).toFixed(2));
                //金钱支付金额
                $(".detailFour .checkDetailFour .moneyPayTime").html(0);
                if( data.payTime != undefined ){
                    //邮豆支付时间
                    $(".detailFour .checkDetailFour .ucoinPayTime").html( handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                    //支付完成时间
                    $(".detailFour .checkDetailFour .finishTime").html(handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
                }
                //配送方式
                //-------||||||||||------------
                if( data.selfPick ){
                    $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[2]).children()[1] ).find("span").html("用户自提");
                }
                else{
                    $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[2]).children()[1] ).find("span").html("快递配送");
                }
                $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[2]).children()[9] ).find("span").html(data.customerRemark);
                //---------
                //下单类型
                $(".detailFour .checkDetailFour .billType").html("用户自提网点代客单");
                if( data.isValet ){
                    $(".operator").html(handleUndefined(data.customerInfo.username));
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.customerInfo.username);
                }
                else{
                    try{
                        $(".operator").html(handleUndefined(data.pickInfo.enterpriseName));
                    }
                    catch(e){

                    }
                    //console.log(1,data.pickInfo.enterpriseName,$(".detailFour .checkDetailFour dl:nth-child(3)").children()[2]).find("span").html();
                    //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.pickInfo.enterpriseName);
                }
                //--------||||||||||----------------
                //卖家备注
                $( $( $(".detailFour .checkDetailFour dl:nth-child(1)")[3]).children()[1] ).find("span").html(data.sellerRemark);
                //--------||||||||||----------------

                //商品列表
                $(".detailFour .Purchase_table tbody").empty();
                data.orderGoodsList.map(function(good){
                    var html = '';
                    html += '<tr bgcolor="#FFFFFF">';
                    html += '<td><img src="' + good.goodsImg + '" width="50" height="50" /><span>' + good.goodsInfoName + '</span></td>';
                    html += '<td><span>' + (good.goodsInfoOldPrice).toFixed(2) + '</span>邮豆</td>';
                    html += '<td>' + good.goodsInfoNum + '</td>';
                    //规格
                    try{
                        var specStr = good.goodsProductReleSpecVoList.spec.specName + ':' + good.goodsProductReleSpecVoList.goodsSpecDetail.specDetailName;
                    }
                    catch(e){
                        console.log(e);
                    }
                    html += '<td><span style="overflow: hidden;text-overflow: ellipsis;">' + handleUndefined(specStr) + '</span></td>';
                    html += '<td><span>' + (good.goodsInfoPrice).toFixed(2) + '</span>邮豆</td>';
                    html += '<td><span>' +(good.goodsInfoSumPrice).toFixed(2) + '</span>邮豆</td>';
                    html += '</tr>';
                    $(".detailFour .Purchase_table tbody").append(html)
                });
            }





        }
        else if(checkstate == 'true,false'){//网点自提单详情用户自主下单
            $(".detailFour").fadeIn(500);
            $(".detailTwo,.detailThree,.detailOne").fadeOut(500);
            //-------订单概况
            //订单编号
            $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[1] ).find("span").html(data.orderCode);
            //下单时间
            var createTime = $(this).parent().parent().parent().parent().find(".hidden_create_time").val();
            //var createDate = handleFullTime( createTime,10,4 );
            $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[2] ).find("span").html(createTime);
            //订单状态
            var orderStatus = $(this).parent().parent().parent().find("orderStatus").html();
            $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[3] ).find("span").html(orderStatus);
            //原始金额
            $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[5] ).find("span").html((data.orderOldPrice).toFixed(2));
            //优惠金额
            $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[6] ).find("span").html(handleUndefined(data.orderPrePrice));
            //交易金额
            $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[7] ).find("span").html((data.orderPrice).toFixed(2));
            //邮豆支付金额
            $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[8] ).find("span").html((data.orderPrice).toFixed(2));
            //金钱支付金额
            $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[9] ).find("span").html(0);
            //邮豆支付时间
            $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[10] ).find("span").html( handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));
            //支付完成时间
            $( $(".detailFour .checkDetailFour dl:nth-child(1)").children()[11] ).find("span").html(handleDate_prev( new Date(data.payTime) ) + " " + handleDate_next( new Date(data.payTime) ));

            //配送方式
            //-------||||||||||------------
            if( data.selfPick ){
                $(".detailThree .checkDetailThree .deliveryType").html("用户自提");
            }
            else{
                $(".detailThree .checkDetailThree .deliveryType").html("快递配送");
            }
            $(".detailThree .checkDetailThree .enterpriseAddress").html(data.pickInfo.enterpriseName);
            $(".detailThree .checkDetailThree .customerRemark").html(data.customerRemark);

            //---------
            //下单类型
            if( data.isValet ){
                $(".operator").html(handleUndefined(data.customerInfo.username));
                //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.customerInfo.username);
            }
            else{
                try{
                    $(".operator").html(handleUndefined(data.pickInfo.enterpriseName));
                }
                catch(e){

                }
                //console.log(1,data.pickInfo.enterpriseName,$(".detailFour .checkDetailFour dl:nth-child(3)").children()[2]).find("span").html();
                //$( $(".detailFour .checkDetailFour li:nth-child(3)").children()[2]).find("span").html(data.pickInfo.enterpriseName);
            }
            //--------||||||||||----------------
            //卖家备注
            $( $(".detailFour .checkDetailFour dl:nth-child(4)").children()[1]).find("span").html(111111);
            //--------||||||||||----------------

            //商品列表
            $(".detailFour .Purchase_table tbody").empty();
            data.orderGoodsList.map(function(good){
                var html = '';
                html += '<tr bgcolor="#FFFFFF">';
                html += '<td><img src="' + good.goodsImg + '" width="50" height="50" /><span>' + good.goodsInfoName + '</span></td>';
                html += '<td><span>' + (good.goodsInfoOldPrice).toFixed(2) + '</span>邮豆</td>';
                html += '<td>' + good.goodsInfoNum + '</td>';
                //规格
                try{
                    var specStr = good.goodsProductReleSpecVoList.spec.specName + ':' + good.goodsProductReleSpecVoList.goodsSpecDetail.specDetailName;
                }
                catch(e){
                    console.log(e);
                }
                html += '<td><span style="overflow: hidden;text-overflow: ellipsis;">' + handleUndefined(specStr) + '</span></td>';
                html += '<td><span>' + (good.goodsInfoPrice).toFixed(2) + '</span>邮豆</td>';
                html += '<td><span>' +(good.goodsInfoSumPrice).toFixed(2) + '</span>邮豆</td>';
                html += '</tr>';
                $(".detailFour .Purchase_table tbody").append(html)
            });

        }
    });

    $(document).on("click",".changestatus",function(){
        coverHtml();
        $(".setAccountState").fadeIn(500);
        $(".setAccountState").css("z-index","9999");
        $("#orderCode").val($(this).parent().parent().parent().find("span").html());
    });

    //设置订单状态
    $("#setAccountStateConfrim").click(function(){
        var orderCode = $("#orderCode").val();
        $.post("../web/api/ordermanage/editStatus",{
            orderCode:orderCode
        },function(data){
            if( data.response == 'success' ){
                ensure_alert("accountManager");
            }
            else{
                response_ensure_alert('error',data.data.text,new function(){

                });
            }
        },'json');
    });
    $("#setAccountStateCancel").click(function(){
        discoverHtml();
        $(".setAccountState").fadeOut(500);
        $(".setAccountState").css("z-index","0");
    });

    $(document).on("click",".changeprice",function(){
        coverHtml();
        $(".setAccountMoneyWarning").fadeIn(500);
        $(".setAccountMoneyWarning").css("z-index","9999");
        $("#orderCode").val($(this).parent().parent().parent().find("span").html());
    });
    $(document).on("click",".calcelorder",function(){
        coverHtml();
        $(".CancelAccountStateWarning").fadeIn(500);
        $(".CancelAccountStateWarning").css("z-index","9999");
        $("#orderCode").val($(this).parent().parent().parent().find("span").html());
    });
    $(document).on("click",".custReturn",function(){
        coverHtml();
        var accountNum = $("#accNum").html();
        var sumNum = $("#sumNum").html();
        $("#returnNum").html(accountNum);
        $("#returnMoneyNum").html(sumNum);
        var data = $(this).parent().parent().parent().parent().find(".data").val();
        data = JSON.parse(data);
        $(".CustomerReturn").fadeIn(500);
        $(".returnNum").html( data.orderCode );//订单编号
        $("#returnMoneyNum").val(data.orderPrice);//订单金额
        //商品列表
        var goodsListhtml = '';
        data.orderGoodsList.map(function(good){
            goodsListhtml += '<dd>';
            goodsListhtml += '<abbr><input type="checkbox" checked="checked" class="checkboxForReturn" value="' + good.goodsInfoId + '"> </abbr>';
            goodsListhtml += '<abbr><img src="' + good.goodsImg + '" width="70" height="70" ><span>' + handleUndefined(good.goodsInfoName) + '</span></abbr>';
            goodsListhtml += '<abbr>' + good.goodsInfoItemNo + '</abbr>';
            goodsListhtml += '<abbr class="returnCount">' + good.goodsInfoNum + '</abbr>';
            goodsListhtml += '<abbr><span>' + ( good.goodsInfoOldPrice).toFixed(2) + '</span>邮豆</abbr>';
            goodsListhtml += '<abbr><span class="sumPrice">' + ( good.goodsInfoSumPrice).toFixed(2) + '</span>邮豆</abbr>';
            goodsListhtml += '<abbr><input class="itemNumReduce" type="button" value="-"><input maxlength="2" class="itemNum" value="1" type="text"><input class="itemNumAdd" type="button" value="+" /></abbr>';
            goodsListhtml += '</dd>';

        });
        $("#returnGoodsList").empty().append(goodsListhtml);
    });
    $(document).on("click","#XX1,#CustomerReturnCancel",function(){
        discoverHtml();
        $(".CustomerReturn").fadeOut(500);
    });
    $(document).on("click",".checkboxForReturn",function(){
        if($(this).prop("checked")){
            var thisVal = $(this).parent().find(".sumPrice").html();
            var sumVal = $("#returnPrice").val();
            $("#returnPrice").val( parseInt( sumVal ) + parseInt( thisVal ) );
        }
        else{

        }
    });


    $("#CustomerReturnConfrim").click(function(){

        var orderNo = $("#returnNum").html();
        var inputCheck = true;
        var str = /^[1-9]*[1-9][0-9]*$/;
        $(".itemNum").each(function(){
            var value = $(this).val();
            if( !str.test( value ) ){
                inputCheck = false;
            }
        });
        var backGoodsId = '{';
        var backGoodsIdFlag = true;
        $("#returnGoodsList dd").each(function(){
            if( $(this).find(".itemNum").val() != '' ){
                backGoodsId += '"' + $(this).find(".checkboxForReturn").val() + '":' + 1 + ',';
            }
            else{
                backGoodsIdFlag = false;
            }
        });
        if(backGoodsId.length > 3){
            backGoodsId = backGoodsId.substring(0,backGoodsId.length-1)
        };
        backGoodsId += '}';
        var reason = $("#customerReturnReason option:selected").val();
        var credential = $("input[name='proof']:checked").val();
        var remark = $(".CustomerReturn textarea").val();
        console.log(2);
        if( backGoodsIdFlag != false && remark != '' && inputCheck != false){
            $.post("../web/api/ordermanage/valetBackOrder",{
                orderNo:orderNo,
                backGoodsId:backGoodsId,
                reason:reason,
                credential:credential,
                remark:remark
            },function(){
                if( data.response == 'success' ){
                    response_ensure_alert("success","申请退单成功",function(){
                        console.log("记录申请时间" + consoleNowTime());
                    });
                }
            },'json');
        }
        else if( remark == '' ){
            response_ensure_alert("error","申请原因不能为空，请输入",function(){
                console.log("退货失败" + consoleNowTime());
            });
        }
        else if( backGoodsIdFlag == false ){
            response_ensure_alert("error","退货数量不能为空，请重新输入",function(){
               console.log("退货失败" + consoleNowTime());
            });
        }
        else if( inputCheck == false ){
            response_ensure_alert("error","退货数量不正确，请重新输入",function(){
                console.log("退货失败" + consoleNowTime());
            });
        }

    });

    //导出全部订单
    $("#accExport").click(function(){
        var orderNo = $("input[name='accountNum']").val();
        var status = orderStatus_backHandle($(".accOn").html());
        var accountCust = $("input[name='accountCust']").val();
        var accountTel = $("input[name='accountTel']").val();
        var createTimeStart = $("#datetimepicker_start").val();
        var createTimeEnd = $("#datetimepicker_end").val();
        var payTimeStart = $("#pay_datetimepicker_start").val();
        var payTimeEnd = $("#pay_datetimepicker_end").val();

        window.location.href = '../web/api/exportExcel/orderDown?orderNo=all' + '&status=' + status + "&receiver=" + accountCust + "&contactPhone=" + accountTel + "&createStart=" + createTimeStart + "&createEnd=" + createTimeEnd + "&payStart=" + payTimeStart + "&payEnd=" + payTimeEnd;
    });
    //导出选中
    $("#accChooseExport").click(function(){
        var orderInfoNumber = '[';
        for(var i = 0;i < checked_array.length;i++){
            for(var j = 0;j < outport_array[i].length;j++){
                orderInfoNumber += '"' + outport_array[i][j] + '",';
            }
        }
        orderInfoNumber = orderInfoNumber.substring(0,orderInfoNumber.length - 1);
        orderInfoNumber += ']';

        if(orderInfoNumber.length > 2){
            window.location.href = '../web/api/exportExcel/orderDown?orderNo=' + orderInfoNumber;
        }
    });


})


function jPages(url,contentStr,target,type,perpage,reason,batchId,array,callbackChecked){
    /*
    * url               api地址
    * postOrget         ajax类型/0Get,1Post
    * contentDom        内容区DomId
    * targetDom         页码区DomId
    * type              插入内容类型
    * size              每页显示数目
    * array             可选参数列表
    * */
    var orderNo = '';
    var status = '';
    var username = '';
    var receiver = '';
    var contactPhone = '';
    var createStart = '';
    var createEnd = '';
    var payStart = '';
    var payEnd = '';
    if( array != undefined ){
        orderNo = array[0];
        status = array[1];
        username = array[2];
        receiver = array[3];
        contactPhone = array[4];
        createStart = array[5];
        createEnd = array[6];
        payStart = array[7];
        payEnd = array[8];
    }

         $.post(url,{
            orderNo:orderNo,
            status:status,
            username:username,
            receiver:receiver,
            contactPhone:contactPhone,
            createStart:createStart,
            createEnd:createEnd,
            payStart:payStart,
            payEnd:payEnd,
            page:1,
            size:perpage
        },function( data ){
            if( data.response == 'success' ){
                var total = data.data.totalElements;
                if( total > 500 ){
                    total = 500
                }
                for(var i = 0;i < total;i++){
                    var html = get_html(type);
                    $("#"+contentStr).append(html);
                }
                jPagesGet(target,contentStr,perpage);
                $("#" + target).find("a").css("display","inline-block");
                $("#" + target).find("span").css("display","inline-block");
                $("#" + target).find(".jp-hidden").css("display","none");
                $("#"+contentStr).empty();
                $(document).on("click","#" + target + " a",function(){
                    orderNo = array[0];
                    status = array[1];
                    username = array[2];
                    receiver = array[3];
                    contactPhone = array[4];
                    createStart = array[5];
                    createEnd = array[6];
                    payStart = array[7];
                    payEnd = array[8];
                    if(flag_a > -1){
                        if( flag_a == 0 ){
                            flag_a = 3;
                        }
                        flag_a--;
                        var page = '';
                        if( $(this).html() == '前一百页' || $(this).html() == '后一百页' ){
                            page = 'not';
                        }

                        else{
                            page = $(this).html();
                        }
                        if( page != 'not'){

                            $.post(url,{
                                orderNo:orderNo,
                                status:status,
                                username:username,
                                receiver:receiver,
                                contactPhone:contactPhone,
                                createStart:createStart,
                                createEnd:createEnd,
                                payStart:payStart,
                                payEnd:payEnd,
                                page:page,
                                size:perpage
                            },function(data){
                                if(data.response == 'success'){
                                    var length = data.data.content.length;
                                    $("#"+contentStr).empty();
                                    if( length > 500 ){
                                        length = 500;
                                    }
                                    for(var i = 0;i < length;i++){
                                        var html = get_html(type);
                                        $("#"+contentStr).append(html);
                                    }
                                    //jPagesGet(contentStr,target,perpage);
                                    $("#" + target).find("a").css("display","inline-block");
                                    $("#" + target).find("span").css("display","inline-block");
                                    $("#" + target).find(".jp-hidden").css("display","none");
                                    //jPagesGet(target,contentStr);
                                    if( length < perpage ){
                                        appendHtml(contentStr,type,data.data.content,length);
                                    }
                                    else{
                                        appendHtml(contentStr,type,data.data.content,perpage);
                                    }
                                    if( typeof callbackChecked == 'function' ){
                                        callbackChecked(page);
                                    }
                                }
                            },'json');
                        }
                    }

                })
                //处理前一页和后一页
                $("#" + target + " .jp-previous").after('<a id="' + target + '_previous">前一百页</a>');
                  $("#" + target + " .jp-previous").remove();

                $("#" + target + " .jp-next").after('<a id="' + target + '_next">后一百页</a>');
                $("#" + target + " .jp-next").remove();

                $("#" + target).children()[1].click();

                //当点击前一百页时，减少一百页
                $("#" + target + "_previous").click(function(){
                    var first = parseInt( $("#" + target + " a")[1].innerHTML );
                    var length = $("#" + target + " a").length - 2;
                    if( first > 100 ){
                        for( var i = 0; i < length; i++){
                            $("#" + target + " a")[i + 1].innerHTML = parseInt( $("#" + target + " a")[i + 1].innerHTML ) - 100;
                        }
                    }
                    if( length > 11 ){
                        $(".additional").remove();
                    }
                });

                //当点击后一百页时，增加一百页
                $("#" + target + "_next").click(function(){
                    var first = parseInt( $("#" + target + " a")[1].innerHTML );
                    var length = $("#" + target + " a").length - 2;
                    var last = parseInt( $("#" + target + " a")[length].innerHTML );
                    if( ( last + 100 ) <= data.data.totalPages ){
                        for( var i = 0; i < length; i++){
                            $("#" + target + " a")[i + 1].innerHTML =parseInt( $("#" + target + " a")[i + 1].innerHTML ) + 100;
                        }
                    }
                    else{
                        var html = '';
                        for( var i = 1;i <= ( data.data.totalPages - last );i++){
                            html += '<a href="#" style="display: inline-block" class="additional">' + ( parseInt(last) + i )  + '</a>';
                        }
                        $("#" + target + "_next").before(html);
                    }
                });
            }
            else{

            }
        });
    var flag_a = 1;


}

function get_html(type){
    var html = '';
    if( type == 1 ){
        html += '<abbr></abbr>';
    }
    return html;
}
function appendHtml(str,type,data,perpage){
    var html = '';
    for(var i=0;i<perpage;i++){
        if( type == 1 ){
            //获取商品总数
            var count = 0;
            data[i].orderGoodsList.map(function(object){
                count = count + object.goodsInfoNum;
            });
            var prev_time = handleDate_prev(new Date(data[i].createTime));
            var next_time = handleDate_next(new Date(data[i].createTime));

            //获取订单状态 0未付款 1已付款未发货 2已发货未确认收获 3已经收货 4作废
            var orderStatus = orderStatus_handle( data[i].orderStatus );
            if( orderStatus == '待发货' ){
                if( data[i].selfPick ){
                    orderStatus = '待提货';
                }
                else{
                    orderStatus = '待发货';
                }
            }
            html += '<tr style="display:inline-block;vertical-align: middle; width:1600px; height:160px; border:1px solid #ccc; margin-bottom:10px;">';
            html += "<td><input class='data' type='hidden' value='" + JSON.stringify(data[i]) + "' /></td>";
            html += '<input type="hidden" class="order_type" value="' + data[i].selfPick + ',' + data[i].isValet + '" />';
            html += '<td style="display:inline-block; width:1550px; height:60px; text-align:left; background:#f6f6f6;height:60px; line-height:60px; padding-left:50px; position:relative;border-bottom:1px solid #ccc;"><input name="accountNumberSelect" class="accountNumber" type="checkbox" />订单号：<span id="accNum">' + data[i].orderCode + '</span>';
            if( isTop ){
                if( orderStatus == '待付款' ){
                    html += '<div style="position:absolute; right:80px; top:0px;"><span><a class="detailCheck">查看详情</a>  <i>- </i> <a class="changestatus">修改状态</a>   <i>-</i>  <a class="changeprice">修改金额</a>   <i>- </i> <a class="cancelorder">取消订单</a> </span></div></td>';
                }
                else{
                    html += '<div style="position:absolute; right:80px; top:0px;"><span><a class="detailCheck">查看详情</a></span></div></td>';
                }
            }
            else{
                if( orderStatus == '已完成' ){
                    html += '<div style="position:absolute; right:80px; top:0px;"><span><a class="detailCheck">查看详情</a>  <i>- </i> <a class="custReturn">代客退单</a></div></td>';
                }
                else{
                    html += '<div style="position:absolute; right:80px; top:0px;"><span><a class="detailCheck">查看详情</a></div></td>';
                }
            }

            var flag = 0;
            html += '<td style="display:inline-block; width:400px; height:100px; line-height:100px; text-align:center; ">' ;
            data[i].orderGoodsList.map(function(object){
                flag=flag + 1;
                if( flag < 3){
                     html += '<img src="' + handleUndefined(object.goodsImg) + '" width="50" height="50" />';
                }
            });
            html += '</td>';
            html += '<td style="display:inline-block; width:125px; height:100px;"><section style="margin-top:20px;margin-left: 0px!important;">' + data[i].orderOldPrice.toFixed() + '邮豆<br />(&nbsp;<span>' + count + '</span>件&nbsp;)</section></td>';

            if( data[i].selfPick == true ){
                html += '<td style="display:inline-block; width:260px; height:100px;"><section style="margin-top:10px;">用户名：' + handleUndefined(data[i].customerInfo.username) + '<span></span><br />收件人：<span>' + handleUndefined(data[i].customerInfo.fullName) + '</span><br />';
                html += '联系电话：<span>' + handleUndefined(data[i].customerInfo.contactPhone) + '</span><br /></section></td>';
            }
            else if( data[i].selfPick == false ){
                html += '<td style="display:inline-block; width:260px; height:100px;"><section style="margin-top:10px;">用户名：' + handleUndefined(data[i].customerInfo.username) + '<span></span><br />收件人：<span>' + handleUndefined(data[i].shippingPerson) + '</span><br />';
                html += '联系电话：<span>' + handleUndefined(data[i].shippingMobile) + '</span><br /></section></td>';
            }



            html += '<td style="display:inline-block; width:250px; height:100px; padding:10px 0px;"><section style="margin-top:20px;">' + prev_time + '<br />' + next_time + '<input type="hidden" class="hidden_create_time" value="' + prev_time + ' ' + next_time +  '"></section></td>';
            if( orderStatus == '已完成' ){
                html += '<td style="display:inline-block; width:200px; height:100px;"><abbr style="background: #24b35f; color: #fff;display: inline-block; margin-top: 30px;padding: 2px;border-radius: 2px;" class="orderStatus" data-orderStatus="' + data[i].orderStatus + '">' + orderStatus + '</abbr></td>';
            }else{
                html += '<td style="display:inline-block; width:200px; height:100px;"><abbr style="background: #ff3300; color: #fff;display: inline-block; margin-top: 30px;padding: 2px;border-radius: 2px;" class="orderStatus" data-orderStatus="' + data[i].orderStatus + '">' + orderStatus + '</abbr></td>';
            }
            html += '<td style="display:inline-block; width:180px; height:100px; line-height:80px;"><span id="sumNum">' + (data[i].orderPrice).toFixed(2) + '邮豆</span></td>';
            html += '<td style="display:inline-block; width:180px; text-align: center; height:100px; line-height:80px;"><span class="checkstate" data-storeId="' + data[i].business.businessId + '">' + handleUndefined(data[i].business.businessName) + '</span></td></tr>';
        }
    }
    $("#"+ str).append(html);
}
function isNumber(obj) {
    return obj === +obj
}
function jPagesGet(content,target,perpage){
    $("#"+content).jPages({
        containerID : target,
        perPage:perpage
    });
}


function handleDate_prev(time){
    var year = time.getFullYear();
    var month = time.getMonth() + 1;
    var day = time.getDate();
    if( month < 9 ){
        month = '0' + month;
    }
    if( day < 10 ){
        day = '0' + day;
    }
    return year + '-' + month + '-' + day;
}

function handleDate_next(time){
    var hour = time.getHours();
    var minute = time.getMinutes();
    if( hour < 10 ){
        hour = '0' + hour;
    }
    if( minute < 10 ){
        minute = '0' + minute;
    }
    return hour + ':' + minute;
}

function getData( type ){
    if ( type == '0' ){
        $(".accountTable li:nth-child(1)").trigger("click");
    }
    else if ( type == '1' ){
        $(".accountTable li:nth-child(2)").trigger("click");
    }
    else if ( type == '2' ){
        $(".accountTable li:nth-child(3)").trigger("click");
    }
    else if ( type == '3' ){
        $(".accountTable li:nth-child(4)").trigger("click");
    }
    else if ( type == '4' ){
        $(".accountTable li:nth-child(5)").trigger("click");
    }
    else if ( type == '5' ){
        $(".accountTable li:nth-child(6)").trigger("click");
    }
    else if ( type == '6' ){
        $(".accountTable li:nth-child(7)").trigger("click");
    }
}

function handleFullTime(time,x,y){
    var result = '';
    result = time.substring(0,x);
    result += " " + time.substring(x + y + 1);
    return result;
}